<!DOCTYPE html>
<html lang="zh-ch">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Nvim Docker | WELCOME TO BLAINET~ BLOG</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="最新 lazyvim
基于 neovim，因此要先安装 neovim，lazyvim 相当于一个插件，最后启动还是 nvim 命令，
常用的快捷键
以下所有的字母大小写要区分！


w 直接可以按照单词向下跳转


ctrl w 然后执行下面的操作即可切换窗口

方向键，切换到对应窗口（常用）
也可以用 h j k l 组合切换，根据习惯使用
更多功能参考菜单提示操作



L 打开的文件切换


: term zsh/bash 打开新的终端 Terminal 并执行携带的命令

如果是 zsh/bash，可以保留当前 Terminal

i/a 激活当前 Terminal，之后可以执行各种命令
Esc Esc（按两次 ESC） Terminal模式 切换到 NORMAL模式


各个终端只能继承最开始的 Terminal 的环境变量，打开的之间不共享环境变量，且打开的都不继承最开始的 term 的 conda 环境，只能手动激活



ctrl l 也能打开一个终端，再次执行可隐藏，但是命令会在后台继续执行


&lt;leader&gt; b（b 表示 buffer）列出对 buffer 的各种操作，buffer 对应打开的各个文件

&lt;leader&gt; bd 删除，后续的省略写 &lt;leader&gt;，但是要有该操作！
, 列出所有的 buffer，还可以预览、搜索



终端窗口中：


LazyExtras 安装额外的插件，x 选中，自动安装">
    <meta name="generator" content="Hugo 0.140.1">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/nvim-docker/">
    

    <meta property="og:url" content="http://localhost:1313/posts/nvim-docker/">
  <meta property="og:site_name" content="WELCOME TO BLAINET~ BLOG">
  <meta property="og:title" content="Nvim Docker">
  <meta property="og:description" content="最新 lazyvim 基于 neovim，因此要先安装 neovim，lazyvim 相当于一个插件，最后启动还是 nvim 命令，
常用的快捷键 以下所有的字母大小写要区分！
w 直接可以按照单词向下跳转
ctrl w 然后执行下面的操作即可切换窗口
方向键，切换到对应窗口（常用） 也可以用 h j k l 组合切换，根据习惯使用 更多功能参考菜单提示操作 L 打开的文件切换
: term zsh/bash 打开新的终端 Terminal 并执行携带的命令
如果是 zsh/bash，可以保留当前 Terminal i/a 激活当前 Terminal，之后可以执行各种命令 Esc Esc（按两次 ESC） Terminal模式 切换到 NORMAL模式 各个终端只能继承最开始的 Terminal 的环境变量，打开的之间不共享环境变量，且打开的都不继承最开始的 term 的 conda 环境，只能手动激活 ctrl l 也能打开一个终端，再次执行可隐藏，但是命令会在后台继续执行
&lt;leader&gt; b（b 表示 buffer）列出对 buffer 的各种操作，buffer 对应打开的各个文件
&lt;leader&gt; bd 删除，后续的省略写 &lt;leader&gt;，但是要有该操作！ , 列出所有的 buffer，还可以预览、搜索 终端窗口中：
LazyExtras 安装额外的插件，x 选中，自动安装">
  <meta property="og:locale" content="zh_ch">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-01-12T18:31:43+00:00">
    <meta property="article:modified_time" content="2025-01-12T18:31:43+00:00">

  <meta itemprop="name" content="Nvim Docker">
  <meta itemprop="description" content="最新 lazyvim 基于 neovim，因此要先安装 neovim，lazyvim 相当于一个插件，最后启动还是 nvim 命令，
常用的快捷键 以下所有的字母大小写要区分！
w 直接可以按照单词向下跳转
ctrl w 然后执行下面的操作即可切换窗口
方向键，切换到对应窗口（常用） 也可以用 h j k l 组合切换，根据习惯使用 更多功能参考菜单提示操作 L 打开的文件切换
: term zsh/bash 打开新的终端 Terminal 并执行携带的命令
如果是 zsh/bash，可以保留当前 Terminal i/a 激活当前 Terminal，之后可以执行各种命令 Esc Esc（按两次 ESC） Terminal模式 切换到 NORMAL模式 各个终端只能继承最开始的 Terminal 的环境变量，打开的之间不共享环境变量，且打开的都不继承最开始的 term 的 conda 环境，只能手动激活 ctrl l 也能打开一个终端，再次执行可隐藏，但是命令会在后台继续执行
&lt;leader&gt; b（b 表示 buffer）列出对 buffer 的各种操作，buffer 对应打开的各个文件
&lt;leader&gt; bd 删除，后续的省略写 &lt;leader&gt;，但是要有该操作！ , 列出所有的 buffer，还可以预览、搜索 终端窗口中：
LazyExtras 安装额外的插件，x 选中，自动安装">
  <meta itemprop="datePublished" content="2025-01-12T18:31:43+00:00">
  <meta itemprop="dateModified" content="2025-01-12T18:31:43+00:00">
  <meta itemprop="wordCount" content="858">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Nvim Docker">
  <meta name="twitter:description" content="最新 lazyvim 基于 neovim，因此要先安装 neovim，lazyvim 相当于一个插件，最后启动还是 nvim 命令，
常用的快捷键 以下所有的字母大小写要区分！
w 直接可以按照单词向下跳转
ctrl w 然后执行下面的操作即可切换窗口
方向键，切换到对应窗口（常用） 也可以用 h j k l 组合切换，根据习惯使用 更多功能参考菜单提示操作 L 打开的文件切换
: term zsh/bash 打开新的终端 Terminal 并执行携带的命令
如果是 zsh/bash，可以保留当前 Terminal i/a 激活当前 Terminal，之后可以执行各种命令 Esc Esc（按两次 ESC） Terminal模式 切换到 NORMAL模式 各个终端只能继承最开始的 Terminal 的环境变量，打开的之间不共享环境变量，且打开的都不继承最开始的 term 的 conda 环境，只能手动激活 ctrl l 也能打开一个终端，再次执行可隐藏，但是命令会在后台继续执行
&lt;leader&gt; b（b 表示 buffer）列出对 buffer 的各种操作，buffer 对应打开的各个文件
&lt;leader&gt; bd 删除，后续的省略写 &lt;leader&gt;，但是要有该操作！ , 列出所有的 buffer，还可以预览、搜索 终端窗口中：
LazyExtras 安装额外的插件，x 选中，自动安装">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        WELCOME TO BLAINET~ BLOG
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Nvim Docker</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2025-01-12T18:31:43Z">January 12, 2025</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id="最新-lazyvim">最新 lazyvim</h2>
<p>基于 <code>neovim</code>，因此要先安装 <code>neovim</code>，<code>lazyvim</code> 相当于一个插件，最后启动还是 <code>nvim</code> 命令，</p>
<h3 id="常用的快捷键">常用的快捷键</h3>
<p>以下所有的字母大小写要区分！</p>
<ul>
<li>
<p><code>w</code> 直接可以按照单词向下跳转</p>
</li>
<li>
<p><code>ctrl w</code> 然后执行下面的操作即可切换窗口</p>
<ul>
<li>方向键，切换到对应窗口（常用）</li>
<li>也可以用 <code>h j k l</code> 组合切换，根据习惯使用</li>
<li>更多功能参考菜单提示操作</li>
</ul>
</li>
<li>
<p><code>L</code> 打开的文件切换</p>
</li>
<li>
<p><code>: term zsh/bash</code> 打开新的终端 Terminal 并执行携带的命令</p>
<ul>
<li>如果是 <code>zsh/bash</code>，可以保留当前 Terminal
<ul>
<li><code>i/a</code> 激活当前 Terminal，之后可以执行各种命令</li>
<li><code>Esc Esc</code>（按两次 <code>ESC</code>） Terminal模式 切换到 NORMAL模式</li>
</ul>
</li>
<li>各个终端只能继承最开始的 Terminal 的环境变量，打开的之间不共享环境变量，且打开的都不继承最开始的 term 的 conda 环境，只能手动激活</li>
</ul>
</li>
<li>
<p><code>ctrl l</code> 也能打开一个终端，再次执行可隐藏，但是命令会在后台继续执行</p>
</li>
<li>
<p><code>&lt;leader&gt; b</code>（b 表示 buffer）列出对 buffer 的各种操作，buffer 对应打开的各个文件</p>
<ul>
<li><code>&lt;leader&gt; bd</code> 删除，后续的省略写 <code>&lt;leader&gt;</code>，但是要有该操作！</li>
<li><code>,</code> 列出所有的 buffer，还可以预览、搜索</li>
</ul>
</li>
</ul>
<p>终端窗口中：</p>
<ul>
<li>
<p><code>LazyExtras</code> 安装额外的插件，<code>x</code> 选中，自动安装</p>
<ul>
<li>
<p>各种语言</p>
</li>
<li>
<p><code>yanky</code></p>
<p><img src="https://raw.githubusercontent.com/blxie/mkdpic/main/vpn/202501111853725.png" alt="image-20250111184525703"></p>
</li>
</ul>
</li>
</ul>
<h3 id="docker-安装搭建">docker 安装搭建</h3>
<p>使用 docker 安装搭建，服务端以服务的形式启动，本地使用 <code>neovide</code> 连接</p>
<h4 id="证书问题基础环境设置">证书问题（基础环境设置）</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export http_proxy<span style="color:#f92672">=</span>http://172.23.240.1:10809
</span></span><span style="display:flex;"><span>export https_proxy<span style="color:#f92672">=</span>$http_proxy
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;insecure&#34;</span> &gt; ~/.curlrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</span></span><span style="display:flex;"><span>git config --global http.sslVerify false
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>apt --fix-broken install
</span></span><span style="display:flex;"><span>export DEBIAN_FRONTEND<span style="color:#f92672">=</span>noninteractive
</span></span><span style="display:flex;"><span>apt update
</span></span><span style="display:flex;"><span>apt install ca-certificates -y
</span></span><span style="display:flex;"><span>update-ca-certificates
</span></span><span style="display:flex;"><span>apt install vim -y
</span></span></code></pre></div><h4 id="换源先更新证书后换源">换源（先更新证书后换源）</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mv /etc/apt/sources.list.d/ubuntu.sources /etc/apt/sources.list.d/ubuntu.sources.bak
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat <span style="color:#e6db74">&lt;&lt;EOF | tee /etc/apt/sources.list.d/ubuntu.sources
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Types: deb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Suites: noble noble-updates noble-backports
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Components: main restricted universe multiverse
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Types: deb
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">URIs: http://security.ubuntu.com/ubuntu/
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Suites: noble-security
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Components: main restricted universe multiverse
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">EOF</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>apt update
</span></span></code></pre></div><h4 id="host-docker-安装">host docker 安装</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>apt update
</span></span><span style="display:flex;"><span>apt install ca-certificates vim zsh docker-compose -y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### docker 代理设置</span>
</span></span><span style="display:flex;"><span>mkdir -p /etc/systemd/system/docker.service.d
</span></span><span style="display:flex;"><span>vim /etc/systemd/system/docker.service.d/http-proxy.conf
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>Service<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Environment<span style="color:#f92672">=</span>http_proxy<span style="color:#f92672">=</span>http://172.23.240.1:10809
</span></span><span style="display:flex;"><span>Environment<span style="color:#f92672">=</span>no_proxy<span style="color:#f92672">=</span>localhost,127.0.0.1
</span></span><span style="display:flex;"><span>Environment<span style="color:#f92672">=</span>https_proxy<span style="color:#f92672">=</span>http://172.23.240.1:10809
</span></span><span style="display:flex;"><span>systemctl daemon-reload
</span></span><span style="display:flex;"><span>systemctl restart docker
</span></span></code></pre></div><h4 id="oh-my-zsh">oh-my-zsh</h4>
<p>oh-my-zsh 参考：https://www.haoyep.com/posts/zsh-config-oh-my-zsh/</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>export http_proxy<span style="color:#f92672">=</span>http://172.23.240.1:10809
</span></span><span style="display:flex;"><span>export https_proxy<span style="color:#f92672">=</span>$http_proxy
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sh -c <span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>git clone https://github.com/zsh-users/zsh-autosuggestions <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-autosuggestions
</span></span><span style="display:flex;"><span>git clone https://github.com/zsh-users/zsh-syntax-highlighting.git <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>~/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/plugins/zsh-syntax-highlighting
</span></span><span style="display:flex;"><span>sed -i <span style="color:#e6db74">&#39;s/^plugins=.*/plugins=(git zsh-autosuggestions zsh-syntax-highlighting z extract)/&#39;</span> ~/.zshrc
</span></span><span style="display:flex;"><span>usermod -s /bin/zsh <span style="color:#66d9ef">$(</span>whoami<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>echo -e <span style="color:#e6db74">&#34;export http_proxy=http://172.23.240.1:10809\nexport https_proxy=\$http_proxy&#34;</span> | tee -a ~/.zshrc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git clone --depth<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> https://github.com/romkatv/powerlevel10k.git <span style="color:#e6db74">${</span>ZSH_CUSTOM<span style="color:#66d9ef">:-</span>$HOME/.oh-my-zsh/custom<span style="color:#e6db74">}</span>/themes/powerlevel10k
</span></span><span style="display:flex;"><span>vim ~/.zshrc
</span></span><span style="display:flex;"><span>ZSH_THEME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;powerlevel10k/powerlevel10k&#34;</span>
</span></span><span style="display:flex;"><span>plugins<span style="color:#f92672">=(</span>git zsh-autosuggestions zsh-syntax-highlighting z extract<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>p10k configure
</span></span></code></pre></div><h4 id="nvm-安装-npm-nodejs">nvm 安装 npm nodejs</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.5/install.sh | bash
</span></span><span style="display:flex;"><span>export NVM_DIR<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$HOME<span style="color:#e6db74">/.nvm&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span> -s <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/nvm.sh&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\.</span> <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/nvm.sh&#34;</span>  <span style="color:#75715e"># This loads nvm</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span> -s <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/bash_completion&#34;</span> <span style="color:#f92672">]</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#ae81ff">\.</span> <span style="color:#e6db74">&#34;</span>$NVM_DIR<span style="color:#e6db74">/bash_completion&#34;</span>  <span style="color:#75715e"># This loads nvm bash_completion</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 安装 Node.js 和 npm</span>
</span></span><span style="display:flex;"><span>nvm install --lts
</span></span><span style="display:flex;"><span>node -v;npm -v
</span></span></code></pre></div><h4 id="miniconda3">miniconda3</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">### conda</span>
</span></span><span style="display:flex;"><span>mkdir -p ~/miniconda3
</span></span><span style="display:flex;"><span>wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O ~/miniconda3/miniconda.sh
</span></span><span style="display:flex;"><span>bash ~/miniconda3/miniconda.sh -b -u -p ~/miniconda3
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda init bash
</span></span><span style="display:flex;"><span>~/miniconda3/bin/conda init zsh
</span></span></code></pre></div><h4 id="nvim-镜像创建">nvim 镜像创建</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">## 1. 使用 lazygit 推荐的 alpine 镜像</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># rm 临时使用</span>
</span></span><span style="display:flex;"><span>docker run -it --rm -v /home:/home --user root neovim:v0.1 bash
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name nvim <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -w /root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /home:/home <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 7894:7894 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  alpine:latest <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  sh
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>apk add git lazygit fzf curl neovim ripgrep alpine-sdk npm python3 bash tmux zsh shadow vim tzdata --update
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">## 2. 使用 ubuntu 镜像</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># docker pull ubuntu</span>
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name nvim <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -w /root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /home:/home <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 7894:7894 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  ubuntu:latest <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">### nvim 相关环境</span>
</span></span><span style="display:flex;"><span>apt update <span style="color:#f92672">&amp;&amp;</span> apt install git fzf curl ripgrep tmux zsh vim wget unzip build-essential npm cargo cmake pkg-config ninja-build pkg-config libssl-dev yq jq libssl-dev luarocks locales
</span></span><span style="display:flex;"><span><span style="color:#75715e">## 配置编码</span>
</span></span><span style="display:flex;"><span>dpkg-reconfigure locales
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>vim ~/.zshrc
</span></span><span style="display:flex;"><span>area<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en_US&#34;</span>
</span></span><span style="display:flex;"><span>area<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zh_CN&#34;</span>
</span></span><span style="display:flex;"><span>export LANG<span style="color:#f92672">=</span>$area.UTF-8
</span></span><span style="display:flex;"><span>export LC_ALL<span style="color:#f92672">=</span>$LANG
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">## rustc</span>
</span></span><span style="display:flex;"><span>curl --proto <span style="color:#e6db74">&#39;=https&#39;</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh
</span></span><span style="display:flex;"><span>rustup update
</span></span><span style="display:flex;"><span>rustc --version
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>LAZYGIT_VERSION<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s <span style="color:#e6db74">&#34;https://api.github.com/repos/jesseduffield/lazygit/releases/latest&#34;</span> | <span style="color:#ae81ff">\g</span>rep -Po <span style="color:#e6db74">&#39;&#34;tag_name&#34;: *&#34;v\K[^&#34;]*&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span>curl -Lo lazygit.tar.gz <span style="color:#e6db74">&#34;https://github.com/jesseduffield/lazygit/releases/download/v</span><span style="color:#e6db74">${</span>LAZYGIT_VERSION<span style="color:#e6db74">}</span><span style="color:#e6db74">/lazygit_</span><span style="color:#e6db74">${</span>LAZYGIT_VERSION<span style="color:#e6db74">}</span><span style="color:#e6db74">_Linux_x86_64.tar.gz&#34;</span>
</span></span><span style="display:flex;"><span>tar xf lazygit.tar.gz lazygit
</span></span><span style="display:flex;"><span>install lazygit -D -t /usr/local/bin/
</span></span><span style="display:flex;"><span>rm -f lazygit*
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -kLOC - https://github.com/neovim/neovim/releases/download/stable/nvim-linux64.tar.gz
</span></span><span style="display:flex;"><span>tar -zxvf nvim-linux64.tar.gz -C /opt <span style="color:#f92672">&amp;&amp;</span> rm -f *tar.gz
</span></span><span style="display:flex;"><span>ln -s /opt/nvim-linux64/bin/nvim /usr/local/bin/nvim
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>git clone https://github.com/LazyVim/starter ~/.config/nvim
</span></span><span style="display:flex;"><span>mkdir -p /usr/local/Ascend
</span></span></code></pre></div><h3 id="配置文件">配置文件</h3>
<p>文件夹目录，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/root/.config/
</span></span><span style="display:flex;"><span>├── lazygit
</span></span><span style="display:flex;"><span>│   └── config.yml
</span></span><span style="display:flex;"><span>└── nvim
</span></span><span style="display:flex;"><span>    ├── init.lua
</span></span><span style="display:flex;"><span>    ├── lazy-lock.json
</span></span><span style="display:flex;"><span>    ├── lazyvim.json
</span></span><span style="display:flex;"><span>    ├── LICENSE
</span></span><span style="display:flex;"><span>    ├── lua
</span></span><span style="display:flex;"><span>    │   ├── config
</span></span><span style="display:flex;"><span>    │   │   ├── autocmds.lua
</span></span><span style="display:flex;"><span>    │   │   ├── keymaps.lua
</span></span><span style="display:flex;"><span>    │   │   ├── lazy.lua
</span></span><span style="display:flex;"><span>    │   │   └── options.lua
</span></span><span style="display:flex;"><span>    │   └── plugins
</span></span><span style="display:flex;"><span>    │       ├── example.lua
</span></span><span style="display:flex;"><span>    │       └── neoclip.lua
</span></span><span style="display:flex;"><span>    ├── README.md
</span></span><span style="display:flex;"><span>    └── stylua.toml
</span></span></code></pre></div><ul>
<li><code>~/.config/nvim/lua/config/options.lua</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vim.o.guifont <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;CodeNewRoman Nerd Font Mono:h13&#34;</span>
</span></span><span style="display:flex;"><span>vim.opt.linespace <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>vim.g.neovide_scale_factor <span style="color:#f92672">=</span> 1.0
</span></span><span style="display:flex;"><span>vim.g.neovide_padding_top <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>vim.g.neovide_padding_bottom <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>vim.g.neovide_padding_right <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>vim.g.neovide_padding_left <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span></code></pre></div><ul>
<li><code>~/.config/nvim/lua/plugins/example.lua</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-lua" data-lang="lua"><span style="display:flex;"><span><span style="color:#75715e">-- 注释</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- if true then return {} end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 可以在这里加上主题文件等 github.nvim</span>
</span></span></code></pre></div><ul>
<li><code>~/.config/nvim/lua/plugins/neoclip.lua</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#66d9ef">return</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#34;AckslD/nvim-neoclip.lua&#34;</span>,
</span></span><span style="display:flex;"><span>  dependencies <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    -- you<span style="color:#960050;background-color:#1e0010">&#39;</span>ll need at least one of these
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;nvim-telescope/telescope.nvim&#34;</span> <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;ibhagwan/fzf-lua&#34;</span> <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">}</span>,
</span></span><span style="display:flex;"><span>  config <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span><span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>    require<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;neoclip&#34;</span><span style="color:#f92672">)</span>.setup<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>  end,
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><ul>
<li><code>conform.nvim</code></li>
</ul>
<h3 id="打包提交">打包提交</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 可以直接覆盖提交</span>
</span></span><span style="display:flex;"><span>docker commit nvim neovim:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name nvim-daemon <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -w /root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /:/host <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 7894:7894 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --restart always <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  nvim:v0.1 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  nvim --headless --listen 0.0.0.0:7894
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># 如果需要修改</span>
</span></span><span style="display:flex;"><span>  docker exec -it nvim-service bash
</span></span><span style="display:flex;"><span>  docker run -itu root --name neovim nvim:latest zsh
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">## 导出: D:\Installers\Dev</span>
</span></span><span style="display:flex;"><span>  docker save -o neovim-docker.tar neovim:latest
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">## 导入</span>
</span></span><span style="display:flex;"><span>  docker load -i neovim-server.tar
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">## docker-compose</span>
</span></span><span style="display:flex;"><span>  docker-compose up -d
</span></span></code></pre></div><p><code>docker-compose.yml</code>【必须是这个名字】</p>
<p>使用 Docker 卷共享 <code>/usr/local/Ascend</code>（可行，但是要提前创建好文件夹目录，可以删除自定义 network）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">## 这里的版本指的是使用哪个 base 的 yml，默认使用最新的</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># version: &#34;3.8&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>  nvim:
</span></span><span style="display:flex;"><span>    image: neovim:latest
</span></span><span style="display:flex;"><span>    container_name: nvim-server
</span></span><span style="display:flex;"><span>    volumes:
</span></span><span style="display:flex;"><span>      - /home:/home
</span></span><span style="display:flex;"><span>      - ascend-data:/usr/local/Ascend  <span style="color:#75715e"># 挂载共享卷到 nvim-daemon</span>
</span></span><span style="display:flex;"><span>    ports:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;7894:7894&#34;</span>
</span></span><span style="display:flex;"><span>    networks:
</span></span><span style="display:flex;"><span>      - if0
</span></span><span style="display:flex;"><span>    environment:
</span></span><span style="display:flex;"><span>      - TZ<span style="color:#f92672">=</span>Asia/Shanghai  <span style="color:#75715e"># 设置时区为中国上海</span>
</span></span><span style="display:flex;"><span>      - PATH<span style="color:#f92672">=</span>/opt/nvim-linux64/bin:$PATH  <span style="color:#75715e"># 将 /opt/nvim-linux64/bin 添加到 PATH</span>
</span></span><span style="display:flex;"><span>    command: nvim --headless --listen 0.0.0.0:7894
</span></span><span style="display:flex;"><span>    restart: always
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ubuntu:
</span></span><span style="display:flex;"><span>    image: ubuntu:latest
</span></span><span style="display:flex;"><span>    container_name: ucase1
</span></span><span style="display:flex;"><span>    volumes:
</span></span><span style="display:flex;"><span>      - /home:/home
</span></span><span style="display:flex;"><span>      - ascend-data:/usr/local/Ascend  <span style="color:#75715e"># 挂载共享卷到 ucase1</span>
</span></span><span style="display:flex;"><span>    networks:
</span></span><span style="display:flex;"><span>      - if0
</span></span><span style="display:flex;"><span>    environment:
</span></span><span style="display:flex;"><span>      - TZ<span style="color:#f92672">=</span>Asia/Shanghai  <span style="color:#75715e"># 设置时区为中国上海</span>
</span></span><span style="display:flex;"><span>    depends_on:
</span></span><span style="display:flex;"><span>      - nvim
</span></span><span style="display:flex;"><span>    command: sleep infinity
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>  if0:
</span></span><span style="display:flex;"><span>    driver: bridge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>volumes:
</span></span><span style="display:flex;"><span>  ascend-data:  <span style="color:#75715e"># 定义共享卷</span>
</span></span></code></pre></div><h3 id="使用方法">使用方法</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 服务端</span>
</span></span><span style="display:flex;"><span>nvim --headless --listen 0.0.0.0:7894	
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># windows 主机：注意使用的是 localhost，而不是 wsl 的 IP！</span>
</span></span><span style="display:flex;"><span>telnet localhost <span style="color:#ae81ff">7894</span> <span style="color:#75715e"># 先检查是否可通</span>
</span></span><span style="display:flex;"><span>neovide.exe --remote-tcp<span style="color:#f92672">=</span>localhost:7894
</span></span></code></pre></div><p>docker 方法的话，直接客户端 <code>neovide</code> 按照上面的管理即可。</p>
<h1 id="hugo-博客">hugo 博客</h1>
<p>docker</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name hugo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -w /root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /home:/home <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 1313:1313 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  alpine:latest <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  sh
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>export http_proxy<span style="color:#f92672">=</span>http://172.23.240.1:10809
</span></span><span style="display:flex;"><span>export https_proxy<span style="color:#f92672">=</span>$http_proxy
</span></span><span style="display:flex;"><span>apk add --no-cache --repository<span style="color:#f92672">=</span>https://dl-cdn.alpinelinux.org/alpine/edge/community hugo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker commit hugo hugo:latest
</span></span><span style="display:flex;"><span>docker rm hugo
</span></span><span style="display:flex;"><span>docker run -it <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  --name hugo <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -w /root <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -v /home:/home <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  -p 1313:1313 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  hugo:latest <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>  sh
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e"># hugo 监听所有网络接口</span>
</span></span><span style="display:flex;"><span>hugo server --bind<span style="color:#f92672">=</span>0.0.0.0 --baseURL<span style="color:#f92672">=</span>http://localhost:1313
</span></span></code></pre></div><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  WELCOME TO BLAINET~ BLOG 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
